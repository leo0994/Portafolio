---
import Linkedin from "../icons/linkedin.astro";
import Github from "../icons/github.astro";
import FileCVico from "../icons/filecvico.astro";
import "../styles/footer.css";
---

<footer class="w-full mt-32 relative">
  <div class="max-w-7xl mx-auto px-6">
    <!-- Contenedor del footer -->
    <div
      class="w-full border border-white/20 rounded-xl p-5 flex flex-col md:flex-row items-start justify-between gap-4 bg-transparent"
    >
      <!-- Logo igual al del header -->
      <div class="footer-logo-pill">
        <video autoplay loop muted playsinline>
          <source src="/Portafolio/videos/LogoFavorito1.mp4" type="video/mp4" />
          Tu navegador no soporta videos.
        </video>
      </div>

      <!-- Botones -->
      <div
        class="flex flex-wrap justify-center md:justify-end gap-4 w-full md:w-auto mt-2 md:mt-4"
      >
        <a
          href="https://www.linkedin.com/in/leo-barrantes-928aa122a/"
          class="rounded-full border border-white/10 flex items-center gap-x-2 py-2 px-4 bg-white/5 hover:scale-110 hover:bg-white/10 transition"
          target="_blank"
        >
          <Linkedin class="w-5 h-5 text-white" />
          <span class="text-white font-semibold" data-i18n="linkedin"
            >LinkedIn</span
          >
        </a>

        <a
          href="https://github.com/leo0994"
          class="rounded-full border border-white/10 flex items-center gap-x-2 py-2 px-4 bg-white/5 hover:scale-110 hover:bg-white/10 transition"
          target="_blank"
        >
          <Github class="w-5 h-5 text-white" />
          <span class="text-white font-semibold" data-i18n="github">Github</span
          >
        </a>

        <a
          href="/Portafolio/cv/LeoBarrantesCV_English.pdf"
          target="_blank"
          class="rounded-full border border-white/10 flex items-center gap-x-2 py-2 px-4 bg-white/5 hover:scale-110 hover:bg-white/10 transition"
        >
          <FileCVico class="w-5 h-5 text-white" />
          <span class="text-white font-semibold" data-i18n="ingles">Inglés</span
          >
        </a>

        <a
          href="/Portafolio/cv/LeoBarrantesCV_Español.pdf"
          target="_blank"
          class="rounded-full border border-white/10 flex items-center gap-x-2 py-2 px-4 bg-white/5 hover:scale-110 hover:bg-white/10 transition"
        >
          <FileCVico class="w-5 h-5 text-white" />
          <span class="text-white font-semibold" data-i18n="espanol"
            >Español</span
          >
        </a>
      </div>
    </div>

    <!-- Botón ScrollTop con imagen personalizada (centrada) -->
    <button
      id="scrollTopBtn"
      onclick="window.scrollTo({ top: 0, behavior: 'smooth' })"
      class="hidden fixed bottom-10 right-4 sm:right-6 z-50 grid place-items-center w-32 h-32 md:w-36 md:h-36 rounded-full transition-all duration-300 hover:scale-110"
      aria-label="Ir arriba"
      style="
        background: url('/Portafolio/imagen/Scrolltop.png') center / contain no-repeat;
        box-shadow: 0 0 24px rgba(0, 172, 255, 0.35);
      "
    ></button>
  </div>

  <!-- Botón Donación -->
  <div class="w-full flex justify-center mt-4">
    <a
      href="https://buymeacoffee.com/leobarranth"
      class="rounded-full border border-yellow-400 flex items-center gap-x-2 py-2 px-6 bg-yellow-300/10 hover:scale-110 hover:bg-yellow-300/20 transition"
      target="_blank"
    >
      ☕ <span class="text-yellow-200 font-semibold" data-i18n="invitameCafe"
        >Invítame un café</span
      >
    </a>
  </div>

  <!-- Línea divisoria -->
  <hr class="my-4 border-white/20" />

  <!-- Derechos -->
  <div class="text-center text-sm text-white/80 pb-6">
    © 2025 <strong class="text-white">Leo Barrantes™</strong>. <span
      data-i18n="noReservado">Ningún derecho reservado.</span
    >
  </div>
</footer>

<!-- Script: posicionamiento del botón -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("scrollTopBtn");
    if (!btn) return;

    const baseBottom = 40; // px
    const extra = 16; // separación extra si el footer entra al viewport

    function toggleVisibility() {
      btn.classList.toggle("hidden", window.scrollY <= 100);
    }

    function adjustBottom() {
      const footer = document.querySelector("footer");
      if (!footer) return;
      const vh = window.innerHeight;
      const rect = footer.getBoundingClientRect();
      const overlap = Math.max(0, vh - rect.top);
      btn.style.bottom = `${baseBottom + (overlap > 0 ? overlap + extra : 0)}px`;
    }

    toggleVisibility();
    adjustBottom();
    window.addEventListener("scroll", () => {
      toggleVisibility();
      adjustBottom();
    });
    window.addEventListener("resize", adjustBottom);
  });
</script>
